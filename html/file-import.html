<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>File import</title>
    <meta content="text/html; charset=iso-8859-1" http-equiv="content-type">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="../css/file-import.css">
    <link rel="stylesheet" type="text/css" media="screen" href="../css/search.css">
    <script src="../js/lib/simple-excel.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
    <script src="../js/lib/jquery-3.3.1.js"></script>
</head>
<body>
    <div class="container-main">
        <div class="container-header">
            <div class="items-header">
                <div class="item-header" onmouseover="langOver()" onmouseout="langOut()" onclick="langClick()">
                    <div class="lang">
                        <img id="lang-icon" class="icon" src="../ressources/fr.png" alt="fr">
                    </div>
                </div>
            </div>
        </div>
        <div class="container-body">
            <div class="items-body">
                <div class="item-body">
                    <div class="drop-zone" id="dropZoneInput">
                        DÃ©posez un document
                    </div>
                </div>
                <div class="item-body">
                    <div class="inputs-import">
                        <label for="fileUpload" class="label-file">Choisir un document</label>
                        <input type="file"  id="fileUpload">
                        <button class="label-file"  id="upload" value="Upload">Valider</button>
                    </div>
                </div>
                <div class="item-body">
                    <div class="input-scan">
                        <button class="label-file" onclick="scanTest()">Scan - Test</button>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $(function () {
            $("#upload").bind("click", function () {
                var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/;
                if (regex.test($("#fileUpload").val().toLowerCase())) {
                    if (typeof (FileReader) != "undefined") {
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            var table = $("<table />");
                            var rows = e.target.result.split("\n");
                            for (var i = 0; i < rows.length; i++) {
                                var row = $("<tr />");
                                var cells = rows[i].split(",");
                                for (var j = 0; j < cells.length; j++) {
                                    var cell = $("<td />");
                                    cell.html(cells[j]);
                                    row.append(cell);
                                }
                                table.append(row);
                            }
                            $("#divCSV").html('');
                            $("#divCSV").append(table);
                        }
                        reader.readAsText($("#fileUpload")[0].files[0]);
                    } else {
                        alert("Ce naviguateur ne supporte pas HTML5.");
                    }
                } else {
                    alert("SVP veuillez uploader un fichier csv ou txt.");
                }
            });
        });        
        </script>
        <hr />
            <div id="divCSV">
            </div>
        <hr />
    </div>
<br><br><br><br><br><br>
</body>
<div class="container-footer">
            <div class="items-footer">
                <div class="item-footer">
                    <div class="ujm">
                        <a href="https://laboratoirehubertcurien.univ-st-etienne.fr/en/teams/connected-intelligence.html" target="blank">
                            <img class="icon-footer" src="../ressources/ujm.png" alt="ujm">
                        </a>
                    </div>
                </div>
                <div class="item-footer">
                    <div class="chambon">
                        <a href="https://www.ville-lechambonsurlignon.fr/" target="blank">
                            <img class="icon-footer" src="../ressources/Blason_Chambon-sur-Lignon.svg" alt="Chambon-sur-Lignon">
                        </a>
                    </div>
                </div>
            </div>
</div>
    <script src="../js/fileImport.js></script>
</html>
